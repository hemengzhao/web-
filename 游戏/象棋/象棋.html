<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>五子棋</title>
    <style>
        .game-container {
            display: flex;
            gap: 20px;
            padding: 20px;
        }
        #gameCanvas {
            border: 2px solid #333;
            background-color: #DEB887;
        }
        .info {
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .current-player {
            margin-bottom: 20px;
        }
        .controls button {
            padding: 8px 16px;
            margin-right: 10px;
            cursor: pointer;
        }
        .black-piece {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: black;
            vertical-align: middle;
            margin-right: 5px;
        }
        .white-piece {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: white;
            border: 1px solid #333;
            vertical-align: middle;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <canvas id="gameCanvas" width="800" height="800"></canvas>
        <div class="info">
            <div class="current-player">
                <h3>当前回合:</h3>
                <div id="currentPlayer">
                    <span class="black-piece"></span>黑棋
                </div>
            </div>
            <div class="controls">
                <button id="restartBtn">重新开始</button>
                <button id="undoBtn">悔棋</button>
            </div>
            <div id="winner"></div>
        </div>
    </div>

    <script type="module"> 
        import { drawBoard, initDrawChessman } from './drawBoard.js';
        import {eventEmitter} from '../../每日一道面试题/js设计模式/发布-订阅模式.js'
        import {Viewer} from './layer.js';
        
        let canvas, ctx,viewer
        
        // 页面 > ChessGame > Viewer > Layer > 棋盘 | 棋子 

        class ChessGame {
            undoArr = [] // 撤销
            redoArr = [] // 恢复
            constructor() {
                this.canvas = document.getElementById('gameCanvas');
                this.ctx = this.canvas.getContext('2d'); 
                this.init();

                eventEmitter.on('updataUndo', (data) => {
                     this.undoArr.push(data)
                })
            }

            // 初始化
            init() {
                this.viewer = new Viewer(this.canvas); 
                this.viewer.draw()
                this.startGameLoop();
            }
            
            // 开始游戏循环
            startGameLoop() {
                
            }

            // 更新
            update() {
                 
            }

            // 渲染 
            render() {
               
            }
            
            // 撤销
            onUndo() {

            }

            // 恢复
            onRedo() {

            }

            // 清空画布
            clearCanvas() {
                
            }
        }

        window.onload = () => {
            new ChessGame();
        };
    </script>
</body>
</html>
